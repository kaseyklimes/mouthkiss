<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Mouthkiss Cafe</title>
  <meta name="description" content="Mouthkiss Cafe - a cafe in our apartment. Coffee, pastries, and pals.">

  <!-- Open Graph / Social -->
  <meta property="og:site_name" content="Mouthkiss Cafe">
  <meta property="og:title" content="Mouthkiss Cafe">
  <meta property="og:url" content="https://www.mouthkisscafe.com">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.mouthkisscafe.com/assets/logo.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Mouthkiss Cafe">
  <meta name="twitter:image" content="https://www.mouthkisscafe.com/assets/logo.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">

  <!-- Fonts loaded via @font-face in styles.css -->

  <!-- Stylesheet -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Header with Logo -->
  <header class="header">
    <a href="/" class="logo-link">
      <img src="assets/logo.png" alt="Mouthkiss Cafe" class="logo">
    </a>
  </header>

  <!-- Main Content -->
  <main class="main">
    <!-- Hero Section with Background -->
    <section class="hero">
      <div class="hero-background"></div>
      <div class="hero-overlay"></div>

      <div class="hero-content">
        <!-- Wavy Marquee -->
        <div class="wavy-marquee">
          <div class="marquee-track" id="marquee-track"></div>
          <span class="sr-only">it's a cafe in our apartment</span>
        </div>

        <!-- Tagline -->
        <h2 class="tagline">coffee ~ pastries ~ pals</h2>

        <!-- Schedule -->
        <p class="schedule">SUNDAY MORNINGS<br>THIS WINTER</p>

        <!-- Email Signup Form -->
        <!-- NOTE: Replace this form with MailerLite embed code -->
        <form class="signup-form" id="signup-form">
          <div class="form-row">
            <div class="form-field">
              <label for="fname" class="visually-hidden">First Name</label>
              <input type="text" id="fname" name="fname" placeholder="First Name" required>
            </div>
            <div class="form-field">
              <label for="lname" class="visually-hidden">Last Name</label>
              <input type="text" id="lname" name="lname" placeholder="Last Name" required>
            </div>
          </div>
          <div class="form-field">
            <label for="email" class="visually-hidden">Email Address</label>
            <input type="email" id="email" name="email" placeholder="Email Address" required>
          </div>
          <button type="submit" class="submit-btn">get a love letter when the cafe is open</button>
        </form>
      </div>

      <!-- Wave Section Divider -->
      <div class="section-divider">
        <svg viewBox="0 0 1440 60" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0,40 Q180,0 360,40 T720,40 T1080,40 T1440,40 L1440,60 L0,60 Z" fill="currentColor"/>
        </svg>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <span class="footer-item">Mouthkiss Cafe</span>
      <span class="footer-item">A Place For Pals</span>
      <span class="footer-item">
        <a href="mailto:pals@mouthkisscafe.com">pals@mouthkisscafe.com</a>
      </span>
    </div>
  </footer>
  <script>
    // Custom form validation
    document.querySelectorAll('#signup-form input[required]').forEach(input => {
      input.oninvalid = () => input.setCustomValidity('hold up who the hell are you');
      input.oninput = () => input.setCustomValidity('');
    });

    // Form submission - redirect to YouTube with autoplay
    document.getElementById('signup-form').addEventListener('submit', function(e) {
      e.preventDefault();
      // TODO: Add MailerLite integration here to actually save the email
      window.location.href = 'https://www.youtube.com/watch?v=pNj9bXKGOiI&autoplay=1';
    });

    // Infinite wavy marquee
    (function() {
      const text = "it's a cafe in our apartment 〰️ ";
      const track = document.getElementById('marquee-track');
      const speed = 50; // pixels per second
      const waveAmplitude = 15; // wave height in pixels
      const waveFrequency = 0.012; // wave frequency (lower = smoother)

      // Create enough copies to fill screen + extra for seamless loop
      const copies = Math.ceil(window.innerWidth / (text.length * 14)) + 2;
      const fullText = text.repeat(copies);

      // Create individual character spans
      let html = '';
      for (let i = 0; i < fullText.length; i++) {
        const char = fullText[i] === ' ' ? '&nbsp;' : fullText[i];
        html += `<span class="wave-char">${char}</span>`;
      }
      track.innerHTML = html;

      // Duplicate the track content for seamless looping
      const trackWidth = track.offsetWidth;
      track.innerHTML = html + html;

      // Cache character elements and their approximate positions
      const chars = Array.from(track.querySelectorAll('.wave-char'));
      const charCount = chars.length;

      let offset = 0;
      let lastTime = performance.now();

      function animate(currentTime) {
        const delta = (currentTime - lastTime) / 1000;
        lastTime = currentTime;

        offset -= speed * delta;

        // Reset offset when first copy has scrolled out
        if (Math.abs(offset) >= trackWidth) {
          offset = 0;
        }

        // Apply wave effect to each character using GPU-accelerated transform3d
        for (let i = 0; i < charCount; i++) {
          const x = i * 14 + offset;
          const phase = x * waveFrequency;

          // Y position on the wave
          const y = Math.sin(phase) * waveAmplitude;

          // Rotation = angle of tangent to the wave
          const tangent = waveAmplitude * waveFrequency * Math.cos(phase);
          const angle = Math.atan(tangent) * (180 / Math.PI);

          chars[i].style.transform = `translate3d(0, ${y}px, 0) rotate(${angle}deg)`;
        }

        track.style.transform = `translate3d(${offset}px, 0, 0)`;
        requestAnimationFrame(animate);
      }

      requestAnimationFrame(animate);
    })();
  </script>
</body>
</html>
